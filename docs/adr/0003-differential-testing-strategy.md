# ADR-0003: Differential Testing戦略

## ステータス
採用

## コンテキスト
Principalにおいて「Differential Testingによって動作を保証する」ことが求められている。
参照実装としてSQLite3が存在する。

## 決定
SQLite3のCLI (`sqlite3`) をオラクルとして使用し、同一のSQL入力に対する出力を比較する。

テスト構成:
1. テストケース（SQLファイル）を用意する
2. `sqlite3` と `sqlite0` の両方で実行する
3. 出力を比較し、差異を検出する

テストスクリプト: `tests/differential/run.sh`

## 理由
- SQLite3は最も信頼性の高い参照実装である
- CLI出力の比較はシンプルかつ効果的である
- テストケースの追加が容易である

## リスクと対応
- リスク: 出力フォーマットの微細な差異で偽陽性が発生する
- 対応（軽減）: 正規化処理を挟み、意味的に等価な出力を同一と判定する
