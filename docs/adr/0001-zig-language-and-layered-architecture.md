# ADR-0001: Zig言語によるレイヤードアーキテクチャの採用

## ステータス
採用

## コンテキスト
SQLite3互換のデータベースエンジンを新規実装する。
実装言語と全体アーキテクチャの決定が必要である。

## 決定
Zig言語を採用し、SQLite3のレイヤードアーキテクチャに倣ったパイプライン構造とする。

```
SQL文字列 → Tokenizer → Parser → Core Engine (VM/Storage)
```

パッケージ構成:
- `packages/tokenizer` - 字句解析
- `packages/parser` - 構文解析
- `packages/core` - 実行エンジン（テーブル管理、行操作）
- `app` - REPL実行バイナリ

## 理由
- Zig はメモリ安全性と低レベル制御のバランスが良い
- C FFI が容易で、SQLite3との差分テストに有利である
- レイヤード構造により、各モジュールを独立してテスト・検証できる
- Principalの要件「実装はZig言語で行う」に合致する

## リスクと対応
- リスク: Zig 0.15はstd APIの破壊的変更が多い
- 対応（受容）: Zig 0.15に固定し、APIの変更に追従する
